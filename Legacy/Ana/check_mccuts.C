{
	TChain * ichain = new TChain("t");
	TChain * ichain2 = new TChain("t");
	ichain->Add("mc.general.root");
	ichain2->Add("56.23.root");
//	ichain->Add("mc.finger.root");
//	ichain2->Add("117.23.root");
	TString cut0 = "ntri==2";
	TString cut1 = cut0+"&&No==n1o";
	TString cut2 = cut1+"&&N>=5";
	TString cut3 = cut2+"&&nop>=2";
//	TString cut2 = cut1+"&&nm==0";
//	TString cut3 = cut2+"&&N>=5";

	double H = 400;
//	double L = 30;
//	double W = 30;
	double L = 300;
	double W = 90;

	gStyle->SetPalette(1);
	gStyle->SetOptStat(0);
	gStyle->SetPadTickX(1);
	gStyle->SetPadTickY(1);

	TCanvas * canvas = new TCanvas("c","c",1440,900);
	gPad->SetGridx(1);
	gPad->SetGridy(1);
	ichain->Draw(Form("slx>>h30(256,-%lf,%lf)",W/H/2*1.1,W/H/2*1.1),cut0);
	ichain->Draw(Form("slx>>h31(256,-%lf,%lf)",W/H/2*1.1,W/H/2*1.1),cut1);
	ichain->Draw(Form("slx>>h32(256,-%lf,%lf)",W/H/2*1.1,W/H/2*1.1),cut2);
	ichain->Draw(Form("slx>>h33(256,-%lf,%lf)",W/H/2*1.1,W/H/2*1.1),cut3);
	ichain->Draw(Form("slz>>h40(256,-%lf,%lf)",L/H/2*1.1,L/H/2*1.1),cut0);
	ichain->Draw(Form("slz>>h41(256,-%lf,%lf)",L/H/2*1.1,L/H/2*1.1),cut1);
	ichain->Draw(Form("slz>>h42(256,-%lf,%lf)",L/H/2*1.1,L/H/2*1.1),cut2);
	ichain->Draw(Form("slz>>h43(256,-%lf,%lf)",L/H/2*1.1,L/H/2*1.1),cut3);
	ichain->Draw(Form("inx>>h10(256,-%lf,%lf)",W/2*1.1,W/2*1.1),cut0);
	ichain->Draw(Form("inx>>h11(256,-%lf,%lf)",W/2*1.1,W/2*1.1),cut1);
	ichain->Draw(Form("inx>>h12(256,-%lf,%lf)",W/2*1.1,W/2*1.1),cut2);
	ichain->Draw(Form("inx>>h13(256,-%lf,%lf)",W/2*1.1,W/2*1.1),cut3);
	ichain->Draw(Form("inz>>h20(256,-%lf,%lf)",L/2*1.1,L/2*1.1),cut0);
	ichain->Draw(Form("inz>>h21(256,-%lf,%lf)",L/2*1.1,L/2*1.1),cut1);
	ichain->Draw(Form("inz>>h22(256,-%lf,%lf)",L/2*1.1,L/2*1.1),cut2);
	ichain->Draw(Form("inz>>h23(256,-%lf,%lf)",L/2*1.1,L/2*1.1),cut3);
	h30->SetTitle("Slope x");
	h30->GetXaxis()->SetTitle("dx/dy");
	h40->SetTitle("Slope z");
	h40->GetXaxis()->SetTitle("dz/dy");
	h10->SetTitle("Intercept x");
	h10->GetXaxis()->SetTitle("x [mm]");
	h20->SetTitle("Intercept z");
	h20->GetXaxis()->SetTitle("z [mm]");
	h10->SetLineColor(kBlack);h20->SetLineColor(kBlack);h30->SetLineColor(kBlack);h40->SetLineColor(kBlack);
	h11->SetLineColor(kBlue);h21->SetLineColor(kBlue);h31->SetLineColor(kBlue);h41->SetLineColor(kBlue);
	h12->SetLineColor(kGreen);h22->SetLineColor(kGreen);h32->SetLineColor(kGreen);h42->SetLineColor(kGreen);
	h13->SetLineColor(kRed);h23->SetLineColor(kRed);h33->SetLineColor(kRed);h43->SetLineColor(kRed);
	double eff1 = ((double)h11->Integral())/h10->Integral();
	double eff2 = ((double)h12->Integral())/h10->Integral();
	double eff3 = ((double)h13->Integral())/h10->Integral();

	TPad *p1 = new TPad("p1","p1",0,0.5,0.5,1);
	TPad *p2 = new TPad("p2","p2",0.5,0.5,1,1);
	TPad *p3 = new TPad("p3","p3",0,0,0.5,0.5);
	TPad *p4 = new TPad("p4","p4",0.5,0,1,0.5);
	p1->Draw();
	p2->Draw();
	p3->Draw();
	p4->Draw();
	p1->cd();h10->Draw(); h11->Draw("SAME"); h12->Draw("SAME"); h13->Draw("SAME");
	TLegend * l1 = new TLegend(0.6,0.6,0.9,0.9);
	l1->AddEntry(h10,Form("All Triggered Events"));
	l1->AddEntry(h11,Form("No layer with 2 good hits:%lf",eff1));
	l1->AddEntry(h12,Form("No layer with 3 hits:%lf",eff2));
	l1->AddEntry(h13,Form("At least 5 hits:%lf",eff3));
	l1->Draw("SAME");
	p2->cd();h20->Draw(); h21->Draw("SAME"); h22->Draw("SAME"); h23->Draw("SAME");
	p3->cd();h30->Draw(); h31->Draw("SAME"); h32->Draw("SAME"); h33->Draw("SAME");
	p4->cd();h40->Draw(); h41->Draw("SAME"); h42->Draw("SAME"); h43->Draw("SAME");
	std::cout<<"eff1 = "<<eff1<<std::endl;
	std::cout<<"eff2 = "<<eff2<<std::endl;
	std::cout<<"eff3 = "<<eff3<<std::endl;

	TCanvas * canvas2 = new TCanvas("c2","c2",1440,900);
	TPad * p21 = new TPad("p21","p21",0,0,0.5,1);
	TPad * p22 = new TPad("p22","p22",0.5,0,1,1);
	p21->Draw("SAME");
	p22->Draw("SAME");
	p21->SetGridx(1);
	p21->SetGridy(1);
	p21->SetLogy(1);
	p22->SetGridx(1);
	p22->SetGridy(1);
	p22->SetLogy(1);

	p21->cd();
	ichain2->Draw("No>>ho");
	ho->Scale(((double)ichain->GetEntries(cut0))/ho->Integral());
	ho->SetLineColor(kBlack);ho->SetFillColor(kBlack);ho->SetFillStyle(3001);
	ho->SetTitle("Number of good hits [0.4~7.7mm]");
	ho->Draw();
	TString cuts = cut0+"&&nt==1";
	TString cutn = cut0+"&&nt!=1";
	ichain->Draw("No>>hos",cuts,"SAME");
	hos->SetLineColor(kRed);hos->SetFillColor(kRed);hos->SetFillStyle(3004);
	hos->Draw("SAME");
	ichain->Draw("No>>hon",cutn,"SAME");
	hon->SetLineColor(kBlue);hon->SetFillColor(kBlue);hon->SetFillStyle(3005);
	hon->Draw("SAME");
	TLegend * l2 = new TLegend(0.6,0.6,0.9,0.9);
	l2->AddEntry(ho,Form("Data"));
	l2->AddEntry(hos,Form("MC Sample with 1 Track"));
	l2->AddEntry(hon,Form("MC Sample with More Tracks"));
	l2->Draw("SAME");

	p22->cd();
	ichain2->Draw("N>>ha");
	ha->Scale(((double)ichain->GetEntries(cut0))/ha->Integral());
	ha->SetLineColor(kBlack);ha->SetFillColor(kBlack);ha->SetFillStyle(3001);
	ha->SetTitle("Number of all hits [0.4~16mm]");
	ha->Draw();
	TString cuts = cut0+"&&nt==1";
	TString cutn = cut0+"&&nt!=1";
	ichain->Draw("N>>has",cuts,"SAME");
	has->SetLineColor(kRed);has->SetFillColor(kRed);has->SetFillStyle(3004);
	has->Draw("SAME");
	ichain->Draw("N>>han",cutn,"SAME");
	han->SetLineColor(kBlue);han->SetFillColor(kBlue);han->SetFillStyle(3005);
	han->Draw("SAME");
	l2->Draw("SAME");
}
